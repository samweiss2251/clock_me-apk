WindowManager:
    MainWidget:
    Login:
    Cloud_update_page:
    Message_Center:

<MainWidget>:
    canvas.before:
        Color:
            ##rgba: 52, 168, 177, 0.4
        Rectangle:
            pos: self.pos
            size: self.size
    name: "main"
    Screen:
        Label:
            text: "WELCOME"
            color: 0, 157, 145, 0.8
            size_hint: .3, .1
            pos_hint: {'center_x':.5, 'center_y': .9}
            font_size: self.width/5

        TextInput:
            id: card_nn
            size_hint: (.2, None)
            height: 30
            multiline: False
            text:
            hint_text: 'Insert ID Card'
            size_hint: .3, .1
            pos_hint: {'center_x':.5, 'center_y': .7}
            font_size: self.width/8
            password: True
            passwort_mask: '*'


        Button:
            text: "Login"
            color: 0,0,0,
            on_press:root.Login_statuss()
            on_release:app.root.current = "login"
            on_press:root.get_info()
            size_hint: .3, .1
            pos_hint: {'center_x':.5, 'center_y': .5}


        Label:
            id:found_status
            text:
            color: 0, 157, 145, 0.8
            size_hint: .1, .1
            pos_hint: {'center_x':.5, 'center_y': .3}
            font_size: self.width/5


<Login>:
    canvas.before:
        Color:
            ##rgba: 249, 172, 97, 0.35
        Rectangle:
            pos: self.pos
            size: self.size
    name: "login"
    on_enter:root.Dis_status()
    Screen:
        Label:
            text: "You Are Currently Logged"
            color: 0, 157, 145, 0.8
            size_hint: .3, .1
            pos_hint: {'center_x':.5, 'center_y': .9}
            font_size: self.width/5

        Label:
            id: clocked_status
            text:
            color: 0, 157, 145, 0.8
            size_hint: .2, .1
            pos_hint: {'center_x':.5, 'center_y': .8}
            font_size: self.width/5

        Label:
            text: " As Of"
            color: 0, 157, 145, 0.8
            size_hint: .3, .1
            pos_hint: {'center_x':.5, 'center_y': .7}
            font_size: self.width/5

        Label:
            id: date_label
            text:
            color: 0, 157, 145, 0.8
            size_hint: .1, .1
            pos_hint: {'center_x':.5, 'center_y': .6}
            font_size: self.width/5



        GridLayout:
            cols: 2
            rows: 3
            name: "transaction_layout"
            color: 0, 157, 145, 0.8
            size_hint: .3, .1
            pos_hint: {'center_x':.5, 'center_y': .5}
            font_size: self.width/5

            Button:
                text: "Clock In"
                color: 0,0,0,
                disabled: True if clocked_status.text == "In" or clocked_status.text == "No Data Found For This User" else False
                #on_release:root.Popup()
                on_press: root.In()
                #on_press: root.Email()
                on_press:app.root.current = "main"

                size_hint: .3, .1
                #on_press:root.Popup()
            Button:
                id: out_btn
                text: "Clock Out"
                color: 0,0,0,
                disabled: True if clocked_status.text == "Out" or clocked_status.text == "No Data Found For This User" else False
                #on_release:root.Popup()
                on_press:root.Out()
                #on_press: root.Email()
                on_press:app.root.current = "main"

                size_hint: .3, .1
                #on_press:root.Popup()

        Button:
            text: "home"
            color: 0,0,0,
            on_press:root.Back_home()
            on_press:app.root.current = "main"
            on_press:root.Dis_status()
            size_hint: .3, .1
            pos_hint: {'center_x':.5, 'center_y': .3}

        ToggleButton:
            id: my_toggle_button
            text: "Login Messages Is Set To OFF"
            on_state:
                self.text = "Send Login Message Is Set To ON" if self.state == "down" else "Login Messages Is OFF"
            size_hint: .3, .1
            pos_hint: {'center_x':.5, 'center_y': .2}

        Label:
            id: status
            text:
            color: 0, 157, 145, 0.8
            size_hint: .1, .1
            pos_hint: {'center_x':.5, 'center_y': .2}
            font_size: self.width/5


        GridLayout:
            cols: 1
            rows: 4
            name: "payment update row"
            color: 0, 157, 145, 0.8
            size_hint: .2, .2
            pos_hint: {'center_x':.1, 'center_y': .7}
            font_size: self.width/7


            Label:
                id: payment_label
                text: 'Payment Amount'
                color: 0, 157, 145, 0.8
                size_hint: .1, .1
                pos_hint: {'center_x':.1, 'center_y': .2}
                font_size: self.width/9



            TextInput:
                id: payment_input
                size_hint: (.2, None)
                height: 30
                multiline: False
                text:
                hint_text:
                size_hint: .1, .1
                pos_hint: {'center_x': .1, 'center_y': .2}
                font_size: self.width/9

            Label:
                id: sent_con
                text:
                color: 0, 157, 145, 0.8
                size_hint: .1, .1




            Button:
                text: "Send Payment"
                on_press: root.Payments()
                color: 0,0,0,
                size_hint: .2, .1


        GridLayout:
            cols: 3
            rows: 3
            name: "cloud_update_row"
            color: 0, 157, 145, 0.8
            size_hint: .3, .1
            pos_hint: {'center_x':.2, 'center_y': .5}
            font_size: self.width/5

            Label:
                id: LAB
                text:"Last Updated"
                color: 0, 157, 145, 0.8
                size_hint: .1, .1
                pos_hint: {'center_x':.5, 'center_y': .2}
                font_size: self.width/5

            Label:
                id: TEST
                text:
                color: 0, 157, 145, 0.8
                size_hint: .1, .1
                pos_hint: {'center_x':.5, 'center_y': .2}
                font_size: self.width/5


            Label:
                id: TESTs
                text:
                color: 0, 157, 145, 0.8
                size_hint: .1, .1
                pos_hint: {'center_x':.5, 'center_y': .2}
                font_size: self.width/5

            Label:
                id: update_date
                text:
                color: 0, 157, 145, 0.8
                size_hint: .1, .1
                pos_hint: {'center_x':.5, 'center_y': .2}
                font_size: self.width/7

            Label:
                id: TESTss
                text:
                color: 0, 157, 145, 0.8
                size_hint: .1, .1
                pos_hint: {'center_x':.5, 'center_y': .2}
                font_size: self.width/5


            Label:
                text:
                color: 0, 157, 145, 0.8
                size_hint: .1, .1
                pos_hint: {'center_x':.5, 'center_y': .2}
                font_size: self.width/5


            Button:
                text: "Update"
                color: 0,0,0,
                on_press:app.root.current = "Cloud_update_page"
                size_hint: .2, .1


<Cloud_update_page>:
    name:"Cloud_update_page"
    orientation: 'vertical'
    # Creating the background of the App
    canvas:
        Color:
            rgb: .255, .255, .255
        Rectangle:
            pos: self.pos
            size: self.size
    # Providing label to the pg bar
            
    # Creating thepg bar of specific value
    ProgressBar:
        id: prbar
        value: 
        #min: 0
        #max: 1
        pos_hint: {'x':.1}
        size_hint_x: .8
        running_duration: 1
        catching_duration: 1
        
    Label:
        id: prmessage
        text: "THE SYSTEM IS RUNNING A CLOUD UPDATE"
        color: .0, 0, .5, 1
        markup: True
        pos_hint: {'center_x':.5, 'center_y': .2}
        size_hint_x: .8

    Button:
        text: "Run A Cloud Update"
        color: 0,0,0,
        size_hint: .3, .1
        pos_hint: {'center_x':.4, 'center_y': .9}
        on_release:app.root.current = "main"
        on_release:root.reaset_bar()
        on_press:root.Load_bar()

    Button:
        text: "Payment Update"
        color: 0,0,0,
        size_hint: .3, .1
        pos_hint: {'center_x':.7, 'center_y': .9}
        on_release:app.root.current = "main"
        on_release:root.reaset_bar()
        on_press:root.pay_update()


        #on_press:root.Popup()



<Message_Center>:
    canvas.before:
        Color:
            ##rgba: 52, 168, 177, 0.4
        Rectangle:
            pos: self.pos
            size: self.size
    name:"Message_Center"
    Screen:
        Label:
            text: "Please Select The Names"
            color: 0, 157, 145, 0.8
            size_hint: .2, .1
            pos_hint: {'center_x':.5, 'center_y': .9}
            font_size: self.width/5

        Label:
            text: "You Want To Send The Messages"
            color: 0, 157, 145, 0.8
            size_hint: .2, .1
            pos_hint: {'center_x':.5, 'center_y': .8}
            font_size: self.width/5

    
        GridLayout:
            cols: 3
            #rows: 3
            name: "message_buttons"
            color: 0, 157, 145, 0.8
            size_hint: .50, .50
            pos_hint: {'center_x':.5, 'center_y': .4}
            font_size: self.width/5

            ToggleButton:
                id:"togbutton"
                text: ""
                on_press:root.message_bu()
                color: 0,0,0,
                size_hint: .3, .1
                pos_hint: {'center_x':.5, 'center_y': .5}
                
            
